// Chand-e-Mahtab Blog Database Schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Post {
  id          String   @id @default(cuid())
  slug        String   @unique
  titleEn     String
  titleUr     String?
  summaryEn   String?
  summaryUr   String?
  content     String
  coverImage  String?
  tags        String   @default("") // Comma-separated tags
  published   Boolean  @default(false)
  publishedAt DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  comments    Comment[]
  
  @@map("posts")
}

model Comment {
  id        String   @id @default(cuid())
  name      String
  email     String?
  content   String
  approved  Boolean  @default(false)
  createdAt DateTime @default(now())
  ipHash    String?  // For rate limiting
  
  // Relations
  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  postId    String
  
  @@map("comments")
}

model SiteMeta {
  id          String @id @default("main")
  aboutEn     String @default("")
  aboutUr     String @default("")
  facebook    String @default("")
  twitter     String @default("")
  instagram   String @default("")
  linkedin    String @default("")
  youtube     String @default("")
  email       String @default("")
  phone       String @default("")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("site_meta")
}
