// Chand-e-Mahtab Blog Database Schema - PRODUCTION VERSION
// This schema is configured for MySQL production deployment
// For local development, use schema.dev.prisma with SQLite

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Post {
  id          String   @id @default(cuid())
  slug        String   @unique
  titleEn     String
  titleUr     String?
  summaryEn   String?
  summaryUr   String?
  content     String   @db.Text
  coverImage  String?
  tags        String   @default("") // Comma-separated tags
  published   Boolean  @default(false)
  publishedAt DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relations
  comments Comment[]

  @@map("posts")
}

model Comment {
  id        String   @id @default(cuid())
  name      String
  email     String
  content   String
  approved  Boolean  @default(false)
  createdAt DateTime @default(now())
  
  // Relations
  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  postId    String

  @@map("comments")
}

model SiteMeta {
  id          String @id @default("main")
  aboutEn     String @db.Text
  aboutUr     String @db.Text
  facebook    String @default("")
  twitter     String @default("")
  instagram   String @default("")
  linkedin    String @default("")
  youtube     String @default("")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("site_meta")
}
